---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

[![Project Status: Wip - Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](http://www.repostatus.org/badges/0.1.0/wip.svg)](http://www.repostatus.org/#wip) [![](http://www.r-pkg.org/badges/version/reprex)](http://www.r-pkg.org/pkg/reprex)

<!-- [![Build Status](https://travis-ci.org/jennybc/reprex.svg?branch=master)](https://travis-ci.org/jennybc/reprex) -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)

## delete any crap left behind by previous unsuccessful attempts to render this
## file
leftovers <- list.files(pattern = "README-tmp", ignore.case = TRUE)
if(length(leftovers)) file.remove(leftovers)
```

### reprex

Prepare reproducible examples for posting to [GitHub issues](https://guides.github.com/features/issues/), [Stack Overflow](https://stackoverflow.com), etc.

  * Given R code on the clipboard, in a file, or as expression,
  * run it via `rmarkdown::render()`,
  * with deliberate choices re: arguments and setup chunk.
  * Get resulting runnable code + output as markdown,
  * formatted for target venue, e.g. `gh` or `so`,
  * on the clipboard and, optionally, in a file.
  * Preview an HTML version in RStudio viewer or default browser.
  
### Installation

```{r installation, eval = FALSE}
devtools::install_github("jennybc/reprex")
```
  
### Quick demo

Let's say you copy this code onto your clipboard:

```{r define-demo-code, include = FALSE}
demo_code <- c(
  "(y <- 1:4)",
  "mean(y)"
)
writeLines(demo_code, "README-tmp.R")
```

```{r reveal-demo-code, asis = TRUE, echo = FALSE, comment = NA}
cat(paste(demo_code, collapse = "\n"))
```

Then you load the `reprex` package and call the main function `reprex()`, where the default target venue is GitHub:

```{r simulate-load-and-call, eval = FALSE}
library(reprex)
reprex()
```

A nicely rendered HTML preview will display in RStudio's Viewer (if you're in RStudio) or your default browser otherwise.

![html-preview](README-viewer-screenshot.png "HTML preview in RStudio")

The relevant bit of GitHub-flavored Markdown is ready to be pasted from your clipboard:

```{r load-and-call, include = FALSE}
writeLines('reprex::reprex(infile = "README-tmp.R", outfile = "README-tmp_gh")',
           "README-tmp-wrapper.R")
devtools::clean_source("README-tmp-wrapper.R", quiet = TRUE)
md_file <- list.files(pattern = "README-tmp_gh.md")
md_content <- readLines(md_file)
```

```{r reveal-md-content, asis = TRUE, echo = FALSE, comment = NA}
cat(paste(md_content, collapse = "\n"))
```

Here's what that Markdown would look like rendered in a GitHub issue:

```{r render-md-content, child = md_file}
```

Anyone else can copy, paste, and run this immediately.

But wait, there's more!

  * Set the target venue to Stack Overflow with `reprex(venue = "so")`.
  * By default, figures are uploaded to [imgur.com](http://imgur.com) and resulting URL is dropped into an inline image tag.
  * Alternatives to clipboard input:
    - `reprex(infile = "my_reprex.R")` gets the code from file
    - `reprex({(y <- 1:4); mean(y)})` gets code from expression

```{r clean-up, include = FALSE}
leftovers <- list.files(pattern = "README-tmp", ignore.case = TRUE)
if(length(leftovers)) file.remove(leftovers)
```

### Reproducible examples

What is a `reprex`? It's a {repr}oducible {ex}ample. Coined by Romain Francois [on twitter](https://twitter.com/romain_francois/status/530011023743655936).

Where and why are they used?

-   A Stack Overflow question that includes a proper reprex is [much more likely to get answered](http://stackoverflow.com/help/no-one-answers), by the most knowledgeable (and therefore busy!) people.
-   A [GitHub issue](https://guides.github.com/features/issues/) that includes a proper reprex is more likely to achieve your goal: getting a bug fixed or getting a new feature, in a finite amount of time.

Read the Stack Overflow thread ["How to make a great R reproducible example?"](http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example/16532098) to learn important guiding principles! That is NOT what this package is about. This package helps with the fiddly mechanics of preparing runnable bits of code for posting.

### Philosophy

The reprex code:

  * Must run and, therefore, should be run **by the person posting**. No faking it.
  * Should be easy for others to digest, so **they don't necessarily have to run it**. You are encouraged to include selected bits of output. :scream:
  * Should be easy for others to copy + paste + run, **iff they so choose**. Don't let inclusion of output break executability.

Accomplished like so:

  * use `rmarkdown::render` or, under the hood, `knitr::spin` to run the code and capture output that would display in R console
  * use chunk option `comment = "#>"` to include the output while retaining executability
